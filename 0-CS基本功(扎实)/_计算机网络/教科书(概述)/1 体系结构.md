OSI 七层协议

- 物理层：数字信号
  - 数据链路层：帧 => MAC
- 网络层IP
- 传输层TCP
- 应用层
  - 会话层：Socket
  - 表示层：HTML渲染？
  - 应用层：应用程序进程



TCP/IP 四层协议

<img src="https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529222234.jpeg" alt="img" style="zoom:50%;" />

# 概述

- 分层模型

  - 层次划分的必要性
    - 计算机网络是由**许多硬件、软件和协议交织起来的复杂系统**。由于网络设计十分复杂，如何设计、组织和实现计算机网络是一个挑战，必须要采用科学有效的方法

  - 层次划分的方法

    - 计算机网络应当具有相对独立的功能

    - 梳理功能之间的关系，使一个功能可以为实现另一个功能提供必要的服务，从而形成系统的层次结构

    - 为提高系统的工作效率，相同或相近的功能仅在一个层次中实现，而且尽可能在较高的层次中实现

  - 层次划分的优点

    - （1）**各层之间相互独立，每一层只实现一种相对独立的功能**
      - 使问题复杂程度降低

    - （2）灵活性好
      - 各层**内部的操作不会影响其他层**

    - （3）结构上可分割开
      - 各层之间都可以采用最合适的技术来实现

    - （4）易于实现和维护
      - 因为整个系统已被分解成相对独立的子系统

    - （5）能促进标准化工作
      - 因为每一层的功能及其提供的服务都有了精确的说明 

  - 模型
    - ![img](https://api2.mubu.com/v3/document_image/9561791c-8a4f-498b-8feb-81ed0346ee4e-4644403.jpg)



# 概念

## 定义

- ==计算机网络的体系结构(architecture)是计算机网络的**各层及其协议的集合**==



## 术语

- （1）实体

  - 表示进行信息交换时任何**可发送或接收信息的硬件或软件进程**

  - 在具体实现时，可以是一个特定的软件模块或软、硬件结合的**设备**

  - 可理解为信息的发送者和接收者

- （2）服务

  - 描述为体系结构中下一层为其上一层**提供支持**

  - 也就是说下一层为上一层提供需要的服务，上一层利用下一层提供的服务实现自己的功能，并同时再向更上一层提供所需要的服务

- （3）接口

  - 指同一系统上下层之间提供服务与被服务的一种**接口**

  - **任何上下层之间都存在接口**

- （4）服务访问点（SAP）

  - 是上下层实体在接口上交换信息的地方，即**上下层实体间的逻辑接口**

  - 上下层实体之间通过服务访问点利用服务原语进行信息交换

- （5）==网络协议（network protocol）==

  - 三要素

    - 语法
      - 定义通信双方交换信息时的**数据**与控制信息的**结构或格式**

    - 语意

      - 即语法定义的结构或格式中具体的含义

      - 表示要发出何种控制信息、完成何种动作以及作出何种相应等

    - 时序

      - 也称为定时或同步

      - 即==事件实现顺序的详细说明==

  - 即网络中的结点为进行数据交换和通信而建立的规则、标准或约定的集合，简称**协议**

  - 即两个对等实体之间进行通信的**规则的集合**



## 协议与服务的关系

- （1）在协议的控制下，两个对等实体之间的通信可以使本层能够向上一层提供服务
  - 协议的实现保证了下一层能够向上一层提供服务。要想实现本层的协议，还需要使用其下一层所提供的服务。

- （2）使用本层的服务实体，即服务接受者只能看见下层的服务而无法看见协议
  - **下面的协议对上面的实体用户是透明的。**

- （3）协议是控制对等实体之间的通信规则，是在“水平方向”的
  - 而服务是由下层向上层**通过层与层之间的接口提供的**，是“垂直方向的”。





# ISO/OSI网络参考模型

## ISO／OSI参考模型

### OSI/RM模型结构

- 层次

  - 物理层

  - 数据链路层

  - 网络层

  - 传输层

  - 会话层

  - 表示层

  - 应用层

- 模型图
  - <img src="https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529222047.jpeg" alt="img" style="zoom: 33%;" />

- 参考模型
  - <img src="https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529222053.jpeg" alt="img" style="zoom: 33%;" />

### OSI参考模型各层的功能

- （1）物理层

  - 物理层是最重要、最基础的一层，位于OSI参考模型的最低层。

  - 物理层为数据链路层提供服务，屏蔽了具体使用的通信介质与设备通信方式的差异。

  - 主要任务
    - 为通信双方提供数据传输的物理连接，并实现透明传输比特流。

  - 功能

    - ①为两个数据链路层实体之间数据的传输建立、维持和拆除相应的物理连接。

    - ②位同步传输。在物理连接上的数据传输一般是串行传输。物理层要保证按位传输的信息的正确性。

    - ③物理层管理。管理物理层内的一切活动。

    - ④实现机械特性、电气特性、功能特性和规程特性的匹配。

- （2）数据链路层

  - 主要任务
    - 检测并校正物理传输介质上产生的差错

  - 传输单位
    - 帧

  - 功能

    - ① 数据链路的建立、维持和拆除
      - 链路两端的结点在通信前要先建立数据链路，在传输过程中也要维持，并在传输完毕后拆除相应的数据链路。

    - ② 数据帧同步
      - 数据帧首部和尾部用来表示数据帧的开始与结束，接收方必须能够明确地从物理层收到的比特流中区分出完整的数据帧，以便进行同步。

    - ③ 差错控制
      - 数据帧信息在传输过程中可能会出现差错。通常采用检错、重发方式等差错控制技术保证数据传输的正确性。

    - ④ 流量控制
      - 通过采取一定措施使网络中部分或全部链路上的信息流量不超过规定的阈值，以保证信息传输通畅顺利。

- （3）网络层

  - 主要任务
    - 在数据链路层的基础上，实现通信子网内部的连接，并向传输层提供端到端的数据传输，为报文或分组通过通信子网以最佳路径到达目的主机。对于跨越多个网络的实体，网络层还需要提供网络互连和路由选择服务等

  - 功能

    - ①网络连接的建立、维持与拆除
      - 为传输层实体之间的通信提供服务

    - ②路由选择
      - 在通信子网中根据一定路由选择算法，选择一条从源结点到目的结点的最佳路由

    - ③流量控制
      - 对整个通信子网内的数据流量和布进行控制与管理，以免发生网络阻塞和死锁，进而提高通信子网的传输效率和吞吐量

    - ④网络层需要对通信子网中传输的数据进行控制与同步，包括组包、拆包、重装以及包信息的同步

- （4）传输层

  - OSI参考模型中负责通信的最高层是传输层，网络中两个主机间端到端的可靠通信要依赖传输层

  - 传输层是OSI参考模型中用户功能的最低层，也是唯一负责数据传输与控制的层次

  - 功能

    - ①传输层传输连接的建立、维持和拆除管理

    - ②寻址
      - 传输层的寻址可以正确识别网络上两台主机间相互通信的应用进程

    - ③多路复用
      - 传输层支持向上的复用，即一个传输层协议可同时支持多个进程连接，可将多个进程连接绑定在一个虚电路或数据报的网络连接上；传输层也支持向下的复用，即一个传输层可以使用多个网络连接

    - ④流量控制
      - 传输层需要对发送端实体发向接收端实体的数据流实施端到端的流量控制，使其不超过接收端的接收能力

    - ⑤差错控制
      - 传输层面向连接的可靠传输服务需要传输层提供如重传策略、重复检测和故障恢复等的差错控制机制

- （5）会话层

  - 会话服务是在传输连接的基础上，在会话层实体之间建立会话连接。

  - 功能

    - ①提供会话连接的建立、数据传送和释放功能。

    - ②管理会话双方的会话活动，包括对单工、半双工、全双工数据传送方式的设定和会话权限管理

    - ③在数据传送流中可以插入适当的同步点，会话用户可以在发生差错是从双方确认的同步点重新开始

- （6）表示层

  - 表示层是为应用进程之间传输的信息提供表示服务，处理与语法有关的语法转换和上下文控制服务

  - 表示层的功能是表示连接的管理、语法转换和上下文表示控制

- （7）应用层

  - OSI参考模型的最高层是应用层，即用户与网络的界面

  - 任务
    - 采用不同的应用协议为用户解决不同类型的应用需求，为应用进程访问OSI参考模型环境提供服务。



### OSI模型中的数据传输过程

- OSI模型的数据传输流程
  - 流程图
    - ![img](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529222210.jpeg)

- OSI模型协议数据单元PDU的封装与拆封
  - 略



## TCP／IP模型

- 模型概述

  - TCP／IP参考模型
    - ![img](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529222220.jpeg)

  - TCP／IP与OSI/RM的对应关系
    - ![img](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529222224.jpeg)

- 各层主要协议

  - 图
    - ![img](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529222234.jpeg)

  - 应用层

    - DNS：域名系统或域名服务器

    - HTTP：超文本传输协议

    - FTP：文件传输协议

    - TELNET：远程登录（终端）仿真协议

    - NNTP：网络新闻传输服务协议

    - SMTP：简单邮件管理协议

    - SNMP：简单网络管理协议

  - 传输层

    - TCP:传输控制协议，提供可靠的面向连接服务

    - UDP:用户数据报协议，提供无连接服务

  - 网际层

    - IP：Internet协议

    - IGMP： Internet组管理协议

    - ICMP： Internet控制消息协议

    - ARP：地址解析协议

    - RARP：反向地址解析协议

  - 网络接口层

    - 无网络协议

    - 支持各种接口类型的网络

- OSI模型和TCP／IP模型的比较

  - 相同之处

    - （1）层次结构划分思想相同
      - 两种体系结构都是以协议栈，即不同协议形成的层次结构，为基础进行层次结构的划分，而且协议栈中的协议相互彼此独立。这样做的好处是，可以大大简化各种网络协议的设计，只需要为不同协议提供关联接口即可

    - （2）总体层次结构相似

      - 这两个体系结构虽然总的层数和对应层次名称都有所不同，但总体层次结构极其相似

      - TCP/IP协议体系结构中的网络接口层对应了OSI/RM最低的数据链路层和和物理层

      - TCP/IP协议体系结构的应用层对应OSI/RM中的应用层、表示层和会话层

      - OSI/RM中的网络层虽然与TCP/IP的网际层名称上不同，但功能却完全一样，至于传输层两种结构都是完全一样的

      - 在这两种结构中，传输层以下都属于通信子网部分，传输层及以上各层都提供了端到端、与网络无关的服务，属于资源子网部分

    - （3）核心组成一样

      - 两种体系结构中都定义了服务、接口和协议三个重要核心概念

      - 服务定义了各层应该做些什么，要提供哪些功能

      - 接口，也就是SAP（服务访问点），为对应的上层提供了获取本层服务的逻辑接口，规定了有哪些参数可以使用，以及使用这些参数的结果是什么

      - 协议就是标准中所说的“通信规程”，它是各层服务功能的具体实现者

      - 当然同一服务在不同网络中可以用不同的协议来实现

      - 各层中的协议各自实现自己的功能，并不影响其他层，任何的一层都只为相邻的上一层提供服务

  - 不同之处

    - （1）适用范围不同

      - OSI/RM是先有理论模型，后面才开发标准化协议，所以OSI/RM不偏重于任何特定的网络类型，具有最广泛的理论参考性，是一个理想化的模型

      - 而TCP/IP协议体系结构则相反，它是在TCP/IP协议族的基础上，专门针对这些协议进行的功能描述和层次划分，与协议的关系非常紧密，仅适用于TCP/IP网络，最具实践性

    - （2）层次结构不同

      - TCP/IP协议体系结构中没有会话层和表示层，事实已证明这两层没有多大用途，即使在OSI/RM中也一样，所以最后取消了，它们的功能合并在应用层之中

      - 另外，OSI/RM中的物理层和数据链路层的功能在TCP/IP协议体系结构中合并到网络接口层，尽管实际上在TCP/IP协议体系结构中对这个层中的具体功能并没有明确规定，实际上这层功能就是OSI/RM物理层和数据链路层的功能

      - 这也是TCP/IP协议体系结构层次划分中不科学的一个重要方面。

    - （3）支持的网络通信模式不同
      - OSI/RM的网络层同时支持无连接和面向连接的网络通信，TCP/IP模型的网络层只提供无连接的服务

    - （4）所包括的通信协议不同

      - OSI/RM是一种开放型的适用于所有类型计算机网络的理想化体系结构模型，所以它的通信协议不仅非常多而且类型复杂，适用于各类网络

      - 但是，由于现在网络系统设计者通常不是参考OSI/RM，而是以目前占据了绝大部分市场的TCP/IP体系结构作为设计参考，所以现在OSI/RM中的许多通信协议都已过时

      - 尽管TCP/IP网络也在OSI/RM的设计范围内，但TCP/IP网络中的通信协议是专门针对具体的TCP/IP协议体系结构而开发，更具有TCP/IP协议体系结构的特点，而且这些协议在不断改进，非常适用于目前广泛应用的TCP/IP网络










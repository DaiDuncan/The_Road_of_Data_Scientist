[原文链接|幕布](https://mubu.com/explore/B5Hvhr1uSO)

MySQL与众不同主要体现在**存储引擎的架构**上，插件式的存储引擎架构将查询处理和其它的系统任务以及数据的存储提取相分离。

![image-20210529082355714](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529082356.png)

# 连接层|connector

最上层是一些客户端和连接服务 => Python API：启动MySQL

- 主要完成一些类似连接处理、**授权认证**及相关安全方案；
- 引入**线程池**的概念，**为通过认证安全连接的客户端提供线程**；
- 可以实现**基于SSL的安全连接**，服务器也会为安全接入的客户端验证它所具有的操作权限。





# 服务层|server

- 主要完成大部分的核心服务功能， 包括查询解析、分析、**优化**、缓存、以及所有的内置函数；
- 所有跨存储引擎的功能也都在这一层实现，包括触发器、存储过程、视图等；





# 引擎层|storage engine⭐

存储引擎层

- 存储引擎**真正的负责了MySQL中数据的存储和提取**；
- 服务器**通过API与存储引擎进行通信**；
- 不同的存储引擎具有的功能不同，我们可以根据实际需要进行选取；



# 存储层

数据存储层

主要是将数据存储在运行于该设备的文件系统之上，并完成与存储引擎的交互。





# Q&A

1 MySQL查询的具体流程？或一条SQL语句在MySQL中如何执行的？

![image-20210529082842773](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img3/20210529082843.png)

流程：

- 客户端请求

- 连接器（验证用户身份，给予权限）

- 查询缓存（==存在缓存则直接返回==，不存在则执行后续操作）

- 分析器（对SQL进行词法分析和语法分析操作）**@编译器**

- 优化器（主要对执行的sql优化选择最优的执行方案方法）

- 执行器（执行时会先看用户是否有执行权限，有才去使用这个引擎提供的接口）

- **去引擎层获取数据返回**（如果**开启查询缓存则会缓存查询结果**）





# me|总结

1 缓存是一个很好的优化机制
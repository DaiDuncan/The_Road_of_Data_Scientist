> è¾“å…¥æµ‹è¯•ç”¨ä¾‹ï¼š
>
> - `2\n1`
> - `3\n14`



## Qï¼š



## Example:

 

## ç‰¹æ®Šçš„é™åˆ¶æ¡ä»¶

- 1 <= k <= 100
- 1 <= n <= $10^4$



# me

![image-20210510113000166](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img2/20210510113000.png)

1 åˆå§‹ç‰ˆæœ¬

- åˆå§‹åŒ–ï¼šä¸‹æ ‡ä¸ç°å®ä¹ æƒ¯ä¸€è‡´â­(å¤šä¸€ä¸ªç»´åº¦ï¼šæµªè´¹ç‚¹ç©ºé—´)
  - æ³¨æ„åŒºåˆ†å¤–å¾ªç¯(çŸ©é˜µçš„è¡Œ) => é¸¡è›‹æ•°é‡ï¼Œå†…å¾ªç¯(çŸ©é˜µçš„åˆ—) => æ¥¼å±‚æ•°é‡
- Base case
- äºŒåˆ†æ³•åˆ†ç»„ => dpæ•°ç»„æ›´æ–°

```python
class Solution(object):
    def superEggDrop(self, k, n):
        """
        :type k: int
        :type n: int
        :rtype: int
        """
        #== 1.åˆå§‹åŒ–|ä¸‹æ ‡ä¸ç°å®ä¸€è‡´
        array = [[1 for i in range(n+1)] for j in range(n+1)]#ä¿®æ”¹1ï¼šç¬¬ä¸€ä¸ªèŒƒå›´æ˜¯n ä¸æ˜¯k
        #print(array)
        # ç‰¹æ®Šæƒ…å†µarray[0][n]=n
        array[1][1:] = [i for i in range(1, n+1)]
        #print(array)
        
        #== 2.è¿­ä»£æ›´æ–°: åŸºäºé¡ºåº
        # æ³¨æ„ä¸‹æ ‡å¯¹åº”ç°å®ï¼Œæ‰€ä»¥rangeä»2å¼€å§‹è¿­ä»£
        for i in range(2, k+1):
            for j in range(2, n+1):
                array[i][j] = 1 + max(array[i-1][j-(j+1)//2-1], array[i][j-(j+1)//2])
                print(i, j, array[i][j])
        
        return array[k][n]
```



2 æ”¹è¿›|åˆå§‹çŸ©é˜µçš„ç»´åº¦

- æ”¹å˜==åˆå§‹çŸ©é˜µçš„ç»´åº¦==
- ==è°ƒæ•´äºŒåˆ†æ³•çš„ä¸‹æ ‡==

```python
def superEggDrop(self, k, n):
        """
        :type k: int
        :type n: int
        :rtype: int
        """
        #== 1.åˆå§‹åŒ–|ä¸‹æ ‡ä¸ç°å®ä¸€è‡´
        #mat_dim = max(k, n)
        array = [[1 for i in range(n+1)] for j in range(k+1)]#ä¿®æ”¹1ï¼šç¬¬ä¸€ä¸ªèŒƒå›´æ˜¯n ä¸æ˜¯k
        #print(array)
        # ç‰¹æ®Šæƒ…å†µarray[0][n]=n
        array[1][1:] = [i for i in range(1, n+1)]
        #print(array)
        
        #== 2.è¿­ä»£æ›´æ–°: åŸºäºé¡ºåº
        # æ³¨æ„ä¸‹æ ‡å¯¹åº”ç°å®ï¼Œæ‰€ä»¥rangeä»2å¼€å§‹è¿­ä»£
        for i in range(2, k+1):
            for j in range(2, n+1):
                array[i][j] = 1 + max(array[i-1][j-j//2-1], array[i][j-(j+1)//2])
                print(i, j, array[i][j])
        
        return array[k][n]
```



3 è§£å†³é‡è¦é—®é¢˜|zçš„å–å€¼ä¸ä¸€å®šæ˜¯äºŒåˆ†æ³•ğŸ‘Œ

- å¯»æ‰¾zå–å€¼çš„æ–¹æ³•ï¼š
  - me|å¯å‘å¼ç›´è§‰: éšç€zçš„å¢åŠ ï¼Œä¸¤è€…å·®å€¼ä¸º0
  - é€‰æ‹©ï¼šç»å¯¹å€¼ä¸º0ï¼Œæˆ–è€…ç›¸æ¯”äºäºŒåˆ†middleçš„ç»å¯¹å€¼å˜å¤§åˆ™é€€å‡ºå¾ªç¯

```python
def superEggDrop(self, k, n):
        """
        :type k: int
        :type n: int
        :rtype: int
        """
        #== 1.åˆå§‹åŒ–|ä¸‹æ ‡ä¸ç°å®ä¹ æƒ¯ä¸€è‡´
        #mat_dim = max(k, n)
        array = [[1 for i in range(n+1)] for j in range(k+1)]#ä¿®æ”¹1ï¼šç¬¬ä¸€ä¸ªèŒƒå›´æ˜¯n ä¸æ˜¯k
        #print(array)
        # ç‰¹æ®Šæƒ…å†µarray[0][n]=n
        array[1][1:] = [i for i in range(1, n+1)]
        #print(array)
        
        #== 2.è¿­ä»£æ›´æ–°: åŸºäºé¡ºåº
        # æ³¨æ„ä¸‹æ ‡å¯¹åº”ç°å®ï¼Œæ‰€ä»¥rangeä»2å¼€å§‹è¿­ä»£
        for i in range(2, k+1):
            for j in range(2, n+1):
                '''
                minum = max(array[i-1][j-j//2-1], array[i][j-(j+1)//2])
                
                for z in range((j+1)//2, (j+1)//2-min()): #å¯å‘å¼ï¼šé¸¡è›‹è¶Šå¤šè¶Šå¥½ï¼Œåªé€‰ä¸€åŠ
                    temp = max(array[i-1][z-1], array[i][j-z])
                    if temp < minum:
                        minum = temp
                '''
                #== å¯å‘å¼æ¢ç´¢
                z = (j+1)//2
                diff_min = abs(array[i-1][z-1] - array[i][j-z])
                
                while(z > 0):
                    z -= 1
                    diff_now = abs(array[i-1][z-1] - array[i][j-z])
                    if diff_now = 0 or diff_now > diff_min:
                        break
                    elif diff_now < diff_min:
                        diff_min = diff_now

                array[i][j] = 1 + max(array[i-1][z-1], array[i][j-z])
                #print(i, j, array[i][j])
        
        return array[k][n]
```



3 ä¼˜åŒ–|å‚è€ƒç­”æ¡ˆåâ­

- ä¸ç”¨forå¾ªç¯éå†+æŸ¥æ‰¾zçš„ä¼˜åŒ–å€¼ => æ”¹ä¸ºé€’å½’
  - åˆ›å»ºå­—å…¸ä¿å­˜é€’å½’è¿‡ç¨‹ä¸­çš„ä¸­é—´ç»“æœ

> - 121/121 cases passed (956 ms)
> - Your runtime beats 22.06 % of python submissions
> - Your memory usage beats 11.76 % of python submissions (24.7 MB)

```python
class Solution(object):
    def superEggDrop(self, k, n):
        """
        :type k: int
        :type n: int
        :rtype: int
        """
        memo = {}
        def dp(k, n):
            if (k, n) not in memo:
                if n == 0:
                    ans = 0
                elif k == 1:
                    ans = n
                else:
                    low, high = 1, n

                    while (low + 1 < high):
                        middle = (low + high) // 2  #é»˜è®¤å‘ä¸‹å–æ•´
                        t1 = dp(k - 1, middle - 1)
                        t2 = dp(k, n - middle)

                        if (t1 < t2):
                            low = middle
                        elif (t1 > t2):
                            high = middle
                        else:
                            low = high = middle
                    
                    ans = 1 + min(max(dp(k - 1, x - 1), dp(k, n - x)) 
                                        for x in (low, high))   #low, highä¹‹é—´çš„ä¸¤ä¸ªå€¼

                memo[k, n] = ans
            return memo[k, n]
        
        return dp(k, n)
```

æ³¨æ„ï¼šç”Ÿæˆå¼çš„ä»£ç æ ¼å¼

- (max(dp(k - 1, x - 1), dp(k, n - x)  for x in (low, high)))

  - forå‰é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„è¡¨è¾¾å¼`max(dp(k - 1, x - 1), dp(k, n - x))`

  - æ•´ä¸ªè¡¨è¾¾å¼ä¸€å®šè¦ç”¨æ‹¬å·æ‹¬èµ·æ¥

  - ```python
    >>> (max(x+100, x*2) for x in range(80, 120))
    <generator object <genexpr> at 0x000001A767190A48>
    
    >>> for i in (max(x+100, x*2) for x in range(80, 120)):	#æ”¹æˆ[]ä¹Ÿå¯ä»¥
        print(i)
    #è¾“å‡ºç»“æœï¼š180 ... 238
    ```



4 æ‹“å±•|å‚è€ƒç­”æ¡ˆï¼šè½¬å˜æ€ç»´

- 121/121 cases passed (24 ms)
- Your runtime beats 75 % of python submissions
- Your memory usage beats 66.18 % of python submissions (13.7 MB)

```python
class Solution(object):
    def superEggDrop(self, k, n):
        """
        :type k: int
        :type n: int
        :rtype: int
        """
        #== æ–¹æ³•ï¼šè½¬å˜æ€ç»´
        def step_maximum(k, n):
            STEPS = 200 #å°½é‡å¤§çš„å€¼
            # å¤–å¾ªç¯æ˜¯STEPSï¼šå¯¹åº”çŸ©é˜µçš„é€è¡Œéå†
            # å†…å¾ªç¯æ˜¯kï¼šå¯¹åº”çŸ©é˜µçš„é€åˆ—éå†
            dp = [[0] * (k+1) for _ in range(STEPS+1)] 

            for i in range(1, STEPS + 1):
                for j in range(1, k+1):
                    dp[i][j] = 1 + dp[i-1][j-1] + dp[i-1][j]
                    
                    if dp[i][j] >= n:
                        return i
        
        return step_maximum(k, n)
```





# å‚è€ƒç­”æ¡ˆ

## 1 æ­£å‘æ€ç»´|äºŒåˆ†æŸ¥æ‰¾

- me|å·®å¼‚ï¼šä¸‹é¢æ˜¯ç”¨é€’å½’çš„æ€è·¯ + dpçŠ¶æ€æ›´æ–°å…¬å¼

```python
class Solution:
    def superEggDrop(self, k: int, n: int) -> int:
        memo = {}
        def dp(k, n):
            if (k, n) not in memo: #ç”¨å­—å…¸ç›´æ¥è¿”å›é€’å½’ç»“æœï¼šè¿™ä¹Ÿå¯ä»¥çœ‹ä½œæ˜¯é€’å½’çš„è¿”å›æ¡ä»¶ä¹‹ä¸€
                if n == 0:
                    ans = 0
                elif k == 1:
                    ans = n
                else:
                    lo, hi = 1, n
                    # keep a gap of 2 x values to manually check later
                    while lo + 1 < hi:
                        x = (lo + hi) // 2
                        t1 = dp(k - 1, x - 1)	
                        t2 = dp(k, n - x)

                        if t1 < t2:
                            lo = x
                        elif t1 > t2:
                            hi = x
                        else:
                            lo = hi = x

                    ans = 1 + min(max(dp(k - 1, x - 1), dp(k, n - x))
                                  for x in (lo, hi))

                memo[k, n] = ans
            return memo[k, n]

        return dp(k, n)
```



## 2 è½¬æ¢æ€ç»´|èšç„¦å…³é”®å¯¹è±¡ï¼šé¸¡è›‹

```python
def superEggDrop(self, K: int, N: int) -> int:
		# M x K --> Given M moves and K eggs, what is the maximum floor we can check ?
        M = 300 # big enough number
        dp = [[0 for j in range(K+1)] for i in range(M+1)]
        # Initialization 1 --> no move no floor --> dp[0][*] = 0
        # Initialization 2 --> no egg no floor --> dp[*][0] = 0
        # General case --> we want to find dp[m][k] --> we pick one egg and drop (1 move)
        #              --> now we have k or k-1 eggs, depending on whether the previous egg is broken
        #              --> so in either case, we can at least sum up 1 (first move) + dp[m-1][k] + dp[m-1][k-1] 
        for i in range(1, M+1):
            for j in range(1, K+1):
                dp[i][j] = 1 + dp[i-1][j] + dp[i-1][j-1]
                if dp[i][j] >= N:
                    return i
```



## 2' ç›´æ¥æ¨å¯¼å‡ºé€’æ¨å…¬å¼ => æ•°å­¦ç»“æœ

ç›®æ ‡æ˜¯$f(t, k)$

![image-20210510133015306](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img2/20210510133015.png)

```python
class Solution(object):
    def superEggDrop(self, K, N):
        def f(x):
            ans = 0
            r = 1
            for i in range(1, K+1):
                r *= x-i+1
                r //= i
                ans += r
                if ans >= N: break
            return ans

        lo, hi = 1, N
        while lo < hi:
            mi = (lo + hi) // 2
            if f(mi) < N:
                lo = mi + 1
            else:
                hi = mi
        return lo
```

- Time Complexity: $O*(K âˆ—log N)$
- Space Complexity: O(1)



# #æ€»ç»“|å…³é”®ç‚¹



## æ€è·¯æ¢³ç†

1 [link: ææ°¸ä¹|åŒè›‹é—®é¢˜](https://www.bilibili.com/video/BV1KE41137PK?from=search&seid=17973611971894816621)

æ ‡è®°M(T, N)

- Tè¡¨ç¤ºæ¥¼å±‚
- Nè¡¨ç¤ºè›‹çš„æ•°é‡

![image-20210509173800257](https://raw.githubusercontent.com/DaiDuncan/PicUploader/main/img2/20210509173806.png)



## æŠ€å·§|å¯å¤ç”¨â­

### 1 å¥‡å¶æ•°çš„åˆ†åŠå–æ•´

- å‘ä¸‹å–æ•´ï¼šmath.floor(), //
- å‘ä¸Šå–æ•´ï¼šmath.ceil()

```python
#== å‘ä¸‹å–æ•´
# å¶æ•°
8 // 2 == 4 #ç›®æ ‡å€¼
# å¥‡æ•°
9 // 2 == 4	#ç›®æ ‡å€¼


#== å‘ä¸Šå–æ•´(æ‰”é¸¡è›‹ä¸­çš„äºŒåˆ†æŸ¥æ‰¾å±äºå‘ä¸Šå–æ•´) => (x + 1) // 2
# å¶æ•°
8 // 2 == 4
(8 + 1) // 2 == 4	#ç›®æ ‡å€¼
# å¥‡æ•°
9 // 2 == 4
(9 + 1) // 2 == 5	#ç›®æ ‡å€¼
```



æ³¨æ„è¢«é™¤æ•°æ˜¯è´Ÿæ•°æ—¶ï¼š

```python
# çœŸé™¤æ³•
X / Y	#è¿”å›ä¸€ä¸ªæµ®ç‚¹ç»“æœ
# æˆªæ–­é™¤æ³•
X // Y


X = 8
Y = 2
Z = 3
S = -8

print(X // Y)	#4
print(X // Z)	#2
print(S // Y)	#-4
print(S // Z)	#-3
```



### 2 é’ˆå¯¹é€’å½’|æ•°æ®ç»“æ„ï¼šå­—å…¸

ç”¨å­—å…¸è®°å½•ä¸­é—´è¿‡ç¨‹ï¼Œå¯ä»¥ç›´æ¥ä½œä¸ºé€’å½’è¿”å›çš„æ¡ä»¶ä¹‹ä¸€

- å­—å…¸æ˜¯å…¨å±€å˜é‡
  - pythonä¸­ï¼šåœ¨é€’å½’å‡½æ•°ä¹‹å‰è¿›è¡Œå®šä¹‰



### ä¸“é¢˜|Python

1 æ ¼å¼|ä¸€è¡Œå†™ä¸ä¸‹ => è·¨è¶Šå¤šè¡Œ

æ–¹æ³•1ï¼‰`\`

æ–¹æ³•2ï¼‰`()`

```python
#== æ–¹æ³•1
# æ³¨æ„ä¸¤ä¸ªå¯¹è±¡éƒ½è¦ç‹¬ç«‹ï¼Œå­—ç¬¦ä¸²å¿…é¡»éƒ½ç”¨åŒå¼•å·å¼•èµ·ã€‚
a= 'sdfaf' \
	'test'	
    

#== æ–¹æ³•2
a=('sdfaf'
'test')

if ï¼ˆxxxx is None and
 xxx is None and
 XXX)
```

